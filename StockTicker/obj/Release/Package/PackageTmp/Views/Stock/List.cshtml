@using StockTicker.Util

@{
    ViewBag.Title = "List";
    var userName = string.Empty;
}

<h2>User Stock List</h2>
<div class="stock-list-crud-btn">
    <button type="button"
            id="add-record-grid-btn"
            class="btn btn-success"
            title="Add"
            data-toggle="modal"
            data-target="#myModal">
        <span class="fa fa-plus-circle" aria-hidden="true"></span>
    </button>
    <button type="button"
            id="delete-record-grid-btn"
            class="btn btn-danger disabled"
            title="Delete"
            onclick="StockHandler.DeleteRecord(event)">
        <span class="fa fa-trash-o" aria-hidden="true"></span>
    </button>
</div>

<table id="stock-list-grid" class="display" width="100%"></table>

<div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Please select stock to add</h4>
            </div>
            <div class="modal-body">
                <table id="all-stock-list-grid" class="display" width="100%"></table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" onclick="StockHandler.SaveSelectedUserStock(event)">Save</button>
            </div>
        </div>

    </div>
</div>

<script type="text/javascript">
    
    $(document).ready(function () {
        setInterval(function () {
            StockHandler.RefreshUserGridData();
        }, 10000);

        StockHandler.GetUserStockList();
    });

</script>